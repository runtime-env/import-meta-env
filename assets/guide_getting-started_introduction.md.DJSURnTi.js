import{_ as i,c as a,o as e,ae as t}from"./chunks/framework.CTVYQtO4.js";const n="/glance.png",g=JSON.parse('{"title":"Introduction","description":"","frontmatter":{},"headers":[],"relativePath":"guide/getting-started/introduction.md","filePath":"guide/getting-started/introduction.md"}'),l={name:"guide/getting-started/introduction.md"};function p(h,s,r,o,d,k){return e(),a("div",null,s[0]||(s[0]=[t('<h1 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h1><p><code>Import-meta-env</code> is a startup/runtime environment variable solution for JavaScript, it provides a set of transform plugins and tools designed to help you develop applications according to the <a href="https://12factor.net/config" target="_blank" rel="noreferrer">12-factor principle</a>.</p><h2 id="published-packages" tabindex="-1">Published Packages <a class="header-anchor" href="#published-packages" aria-label="Permalink to &quot;Published Packages&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Package</th><th>Version</th><th>Changelog</th><th>License</th></tr></thead><tbody><tr><td><a href="https://github.com/import-meta-env/import-meta-env/tree/main/packages/babel/" target="_blank" rel="noreferrer">@import-meta-env/babel</a></td><td><a href="https://npmjs.com/package/@import-meta-env/babel" target="_blank" rel="noreferrer"><img src="https://img.shields.io/npm/v/@import-meta-env/babel.svg?color=blue" alt="npm"></a></td><td><a href="https://github.com/import-meta-env/import-meta-env/blob/main/packages/babel/CHANGELOG.md" target="_blank" rel="noreferrer">CHANGELOG</a></td><td><img src="https://img.shields.io/npm/l/@import-meta-env/babel?color=blue" alt="license"></td></tr><tr><td><a href="https://github.com/import-meta-env/import-meta-env/tree/main/packages/cli/" target="_blank" rel="noreferrer">@import-meta-env/cli</a></td><td><a href="https://npmjs.com/package/@import-meta-env/cli" target="_blank" rel="noreferrer"><img src="https://img.shields.io/npm/v/@import-meta-env/cli.svg?color=blue" alt="npm"></a></td><td><a href="https://github.com/import-meta-env/import-meta-env/blob/main/packages/cli/CHANGELOG.md" target="_blank" rel="noreferrer">CHANGELOG</a></td><td><img src="https://img.shields.io/npm/l/@import-meta-env/cli?color=blue" alt="license"></td></tr><tr><td><a href="https://github.com/import-meta-env/import-meta-env/tree/main/packages/flow/" target="_blank" rel="noreferrer">@import-meta-env/flow</a></td><td><a href="https://npmjs.com/package/@import-meta-env/flow" target="_blank" rel="noreferrer"><img src="https://img.shields.io/npm/v/@import-meta-env/flow.svg?color=blue" alt="npm"></a></td><td><a href="https://github.com/import-meta-env/import-meta-env/blob/main/packages/flow/CHANGELOG.md" target="_blank" rel="noreferrer">CHANGELOG</a></td><td><img src="https://img.shields.io/npm/l/@import-meta-env/flow?color=blue" alt="license"></td></tr><tr><td><a href="https://github.com/import-meta-env/import-meta-env/tree/main/packages/prepare/" target="_blank" rel="noreferrer">@import-meta-env/prepare</a></td><td><a href="https://npmjs.com/package/@import-meta-env/prepare" target="_blank" rel="noreferrer"><img src="https://img.shields.io/npm/v/@import-meta-env/prepare.svg?color=blue" alt="npm"></a></td><td><a href="https://github.com/import-meta-env/import-meta-env/blob/main/packages/prepare/CHANGELOG.md" target="_blank" rel="noreferrer">CHANGELOG</a></td><td><img src="https://img.shields.io/npm/l/@import-meta-env/prepare?color=blue" alt="license"></td></tr><tr><td><a href="https://github.com/import-meta-env/import-meta-env/tree/main/packages/swc/" target="_blank" rel="noreferrer">@import-meta-env/swc</a></td><td><a href="https://npmjs.com/package/@import-meta-env/swc" target="_blank" rel="noreferrer"><img src="https://img.shields.io/npm/v/@import-meta-env/swc.svg?color=blue" alt="npm"></a></td><td><a href="https://github.com/import-meta-env/import-meta-env/blob/main/packages/swc/CHANGELOG.md" target="_blank" rel="noreferrer">CHANGELOG</a></td><td><img src="https://img.shields.io/npm/l/@import-meta-env/swc?color=blue" alt="license"></td></tr><tr><td><a href="https://github.com/import-meta-env/import-meta-env/tree/main/packages/typescript/" target="_blank" rel="noreferrer">@import-meta-env/typescript</a></td><td><a href="https://npmjs.com/package/@import-meta-env/typescript" target="_blank" rel="noreferrer"><img src="https://img.shields.io/npm/v/@import-meta-env/typescript.svg?color=blue" alt="npm"></a></td><td><a href="https://github.com/import-meta-env/import-meta-env/blob/main/packages/typescript/CHANGELOG.md" target="_blank" rel="noreferrer">CHANGELOG</a></td><td><img src="https://img.shields.io/npm/l/@import-meta-env/typescript?color=blue" alt="license"></td></tr><tr><td><a href="https://github.com/import-meta-env/import-meta-env/tree/main/packages/unplugin/" target="_blank" rel="noreferrer">@import-meta-env/unplugin</a></td><td><a href="https://npmjs.com/package/@import-meta-env/unplugin" target="_blank" rel="noreferrer"><img src="https://img.shields.io/npm/v/@import-meta-env/unplugin.svg?color=blue" alt="npm"></a></td><td><a href="https://github.com/import-meta-env/import-meta-env/blob/main/packages/unplugin/CHANGELOG.md" target="_blank" rel="noreferrer">CHANGELOG</a></td><td><img src="https://img.shields.io/npm/l/@import-meta-env/unplugin?color=blue" alt="license"></td></tr></tbody></table><h2 id="guide" tabindex="-1">Guide <a class="header-anchor" href="#guide" aria-label="Permalink to &quot;Guide&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>We are excited to introduce <a href="https://github.com/runtime-env/runtime-env" target="_blank" rel="noreferrer">runtime-env</a>, a <strong>framework-agnostic</strong> library that provides a runtime environment variable solution for JavaScript applications. It integrates effortlessly with any framework or build tool.</p><p>Discover it today and streamline your development workflow!</p></div><blockquote><p>In this guide, we will use Webpack as an example, but you can also use other build tools. All supported build tools can be found on the <a href="/guide/getting-started/compile-time-transform.html">compile-time transform plugin</a>s page.</p></blockquote><p><img src="'+n+`" alt=""></p><h3 id="write-your-code" tabindex="-1">Write your code <a class="header-anchor" href="#write-your-code" aria-label="Permalink to &quot;Write your code&quot;">​</a></h3><ol><li><p>To prevent accidentally leaking environment variables to the client, you need to list public environment variables in an example file (e.g., <code>.env.example</code>):</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .env.example</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NAME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span></span></code></pre></div><p>See the <a href="#env-example-file"><code>.env.example file</code></a> section for details.</p></li><li><p>Obtain the environment variable:</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// src/index.js</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">- const name = process.env.NAME</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+ const name = import.meta.env.NAME</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.querySelector(&quot;body&quot;).innerHTML = \`&lt;h1&gt;Hello, \${name}&lt;/h1&gt;\`;</span></span></code></pre></div><p>See the <a href="#syntax">syntax</a> section for details.</p></li></ol><h3 id="transform-it" tabindex="-1">Transform it <a class="header-anchor" href="#transform-it" aria-label="Permalink to &quot;Transform it&quot;">​</a></h3><p>Install dotenv in order for Import-meta-env packages to work:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dotenv</span></span></code></pre></div><ul><li><p>During development and testing:</p><ol><li><p>Define environment variables:</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .env</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NAME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=development</span></span></code></pre></div><p>See the <a href="#env-file"><code>.env</code> file</a> section for details.</p></li><li><p>Install and setup <a href="/guide/getting-started/compile-time-transform.html">compile-time transform plugin</a>s.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @import-meta-env/unplugin</span></span></code></pre></div><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">module.exports = {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+   require(&quot;@import-meta-env/unplugin&quot;).webpack({</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+     example: &quot;.env.example&quot;,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+     env: &quot;.env&quot;,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+     transformMode: &quot;compile-time&quot;,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+   }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div></li><li><p>Transform it:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> webpack</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mode=development</span></span></code></pre></div><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// dist/main.js</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">- const name = import.meta.env.NAME</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+ const name = &quot;development&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// ...</span></span></code></pre></div></li></ol></li><li><p>During production:</p><ol><li><p>Install and setup <a href="/guide/getting-started/compile-time-transform.html">compile-time transform plugin</a>s.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @import-meta-env/unplugin</span></span></code></pre></div><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">module.exports = {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    require(&quot;@import-meta-env/unplugin&quot;).webpack({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      example: &quot;.env.example&quot;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      env: &quot;.env&quot;,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      // If you are using popular packagers such as Webpack and Vite,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      // @import-meta-env/unplugin will automatically switch the \`transformMode\` for you, you don&#39;t have to explicitly define it:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      // - for development mode, \`transformMode\` will be \`&quot;compile-time&quot;\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      // - for production mode, \`transformMode\` will be \`&quot;runtime&quot;\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      transformMode: undefined,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      // Otherwise, you need to set \`transformMode\` according to your needs, for example:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      transformMode: process.env.NODE_ENV === &quot;development&quot; ? &quot;compile-time&quot; : &quot;runtime&quot;,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-     transformMode: &quot;compile-time&quot;,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+     transformMode: &quot;runtime&quot;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div></li><li><p>Transform it:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> webpack</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mode=production</span></span></code></pre></div><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// dist/main.js</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">- const name = import.meta.env.NAME</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+ const name = globalThis.import_meta_env.NAME</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// ...</span></span></code></pre></div></li><li><p>In order to obtain environment variables from <code>globalThis.import_meta_env</code>, you also need to add a special expression before your entry:</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!-- public/index.html --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!DOCTYPE html&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;html lang=&quot;en&quot;&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;head&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;meta charset=&quot;UTF-8&quot; /&gt;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+   &lt;script&gt;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+     globalThis.import_meta_env = JSON.parse(&#39;&quot;import_meta_env_placeholder&quot;&#39;)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+   &lt;/script&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/head&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/html&gt;</span></span></code></pre></div><p>See the <a href="#special-expression">special expression</a> section for details.</p></li><li><p>Define environment variables:</p><p>In the real world, we might define environment variables in the cloud, for example: Google Cloud Run environment variables.</p><p>Here, we simulate this by defining our environment variables in the system:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">production</span></span></code></pre></div></li><li><p>Install <a href="/guide/getting-started/runtime-transform.html">runtime transform tool</a>.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @import-meta-env/cli</span></span></code></pre></div></li><li><p>Transform it again:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> import-meta-env</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.example</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/index.html</span></span></code></pre></div><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!-- dist/index.html --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!DOCTYPE html&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;html lang=&quot;en&quot;&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;head&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;meta charset=&quot;UTF-8&quot; /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;script&gt;</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-     globalThis.import_meta_env = JSON.parse(&#39;&quot;import_meta_env_placeholder&quot;&#39;)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+     globalThis.import_meta_env = JSON.parse(&#39;{&quot;NAME&quot;:&quot;production&quot;}&#39;);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/script&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;script defer=&quot;defer&quot; src=&quot;main.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/head&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/html&gt;</span></span></code></pre></div></li></ol></li></ul><p>See the <a href="#transform">transform</a> section for details.</p><p>You can find the corresponding working example <a href="https://github.com/import-meta-env/import-meta-env/tree/main/diff/after-using-import-meta-env" target="_blank" rel="noreferrer">here</a>, and all examples <a href="https://github.com/import-meta-env/import-meta-env/blob/main/packages/examples" target="_blank" rel="noreferrer">here</a>.</p><h2 id="env-file" tabindex="-1">.env File <a class="header-anchor" href="#env-file" aria-label="Permalink to &quot;.env File&quot;">​</a></h2><p>By default, <code>Import-meta-env</code> will load environment variables from your system and the <code>.env</code> file (you can change or disable this using <code>env</code> option):</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NAME=world</span></span></code></pre></div><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .env</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NAME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=world</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>You should gitignore this file because these environment variables are usually used for local development purposes, while your production environment variables are usually stored in your cloud, such as GCP or AWS, and will be loaded from the system.</p></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>It is common to temporarily change environment variables for debugging or other purposes. You can use <a href="/guide/tools/prepare.html">@import-meta-env/prepare</a> to automatically generate the final <code>.env</code> file from <code>.env.local</code>, <code>.env.local.defaults</code>, etc. files.</p></div><h2 id="env-example-file" tabindex="-1">.env.example File <a class="header-anchor" href="#env-example-file" aria-label="Permalink to &quot;.env.example File&quot;">​</a></h2><p>To prevent accidentally leaking environment variables to the client, only keys listed in an example file (e.g., <code>.env.example</code>) are exposed.</p><p>For example, if you have these config:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NAME=world</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SECRET_KEY=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">****</span></span></code></pre></div><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .env.example</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NAME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=this-value-can-be-anything</span></span></code></pre></div><p>then only <code>NAME</code> will be exposed to your client source code, but <code>SECRET_KEY</code> will not.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>For security reason, the <code>example</code> option does not have default value, you have to explicitly define it.</p></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Since any environment variables exposed to your source code will end up in your client bundle, the keys listed in <code>.env.example</code> <strong>should not contain any sensitive information</strong>.</p></div><h2 id="syntax" tabindex="-1">Syntax <a class="header-anchor" href="#syntax" aria-label="Permalink to &quot;Syntax&quot;">​</a></h2><p><code>Import-meta-env</code> exposes your environment variables on special environment variable expressions:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">FOO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">BAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ...</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Since these environment variables expression are statically transformed. It is therefore necessary to always reference them using the full static string.</p><p>In other words, the following are <strong>invalid</strong>:</p><ul><li>Entire object access, i.e. <code>import.meta.env</code></li><li>Computed key access, e.g. <code>import.meta.env[&quot;FOO&quot;]</code></li></ul></div><h2 id="transform" tabindex="-1">Transform <a class="header-anchor" href="#transform" aria-label="Permalink to &quot;Transform&quot;">​</a></h2><p><code>Import-meta-env</code> provides two sets of transform:</p><ol><li><a href="/guide/getting-started/compile-time-transform.html">compile-time transform plugins</a></li><li><a href="/guide/getting-started/runtime-transform.html">runtime transform tool</a></li></ol><p>In development and testing, you use the compile-time transform plugins to replace the <a href="#syntax">environment variable expressions</a> with environment variable strings.</p><p>In production, you need to use the compile-time transform plugins to replace the environment variable expressions with global accessors (in order to access to a special object), and then use runtime transform tool to inject environment variables to the <a href="#special-expression">special expression</a>.</p><h2 id="compile-time-transform-modes" tabindex="-1">Compile-time Transform Modes <a class="header-anchor" href="#compile-time-transform-modes" aria-label="Permalink to &quot;Compile-time Transform Modes&quot;">​</a></h2><p>Since <a href="/guide/getting-started/compile-time-transform.html">compile-time transform plugins</a> will be used in two scenarios, it have two transform modes:</p><ol><li><code>compile-time</code>: statically replace <code>import.meta.env.KEY</code> with <code>&quot;value&quot;</code></li><li><code>runtime</code>: statically replace <code>import.meta.env</code> with a global accessor</li></ol><p>Usually, you don&#39;t need to define it explicitly, because <code>Import-meta-env</code> determines it automatically based on your environment variables (e.g., <code>process.env.NODE_ENV</code>). See <a href="/api.html">API</a> for details.</p><h2 id="special-expression" tabindex="-1">Special Expression <a class="header-anchor" href="#special-expression" aria-label="Permalink to &quot;Special Expression&quot;">​</a></h2><p>In order to inject environment variables in production, you also need to add a special expression in your app:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">globalThis.import_meta_env </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&quot;import_meta_env_placeholder&quot;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>This expression will be replaced with environment variables by using <a href="/guide/getting-started/runtime-transform.html">runtime transform tool</a> as follows:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">globalThis.import_meta_env </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{&quot;NAME&quot;:&quot;world&quot;}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>We encourage you to put this special expression in your <code>index.html</code> because the <code>Cache-Control</code> header is usually set to <code>no-cache</code> when requesting <code>index.html</code>:</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">doctype</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;en&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> charset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      globalThis.import_meta_env </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&quot;import_meta_env_placeholder&quot;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>The value of the expression will be statically replaced, the following will not work:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">globalThis.import_meta_env </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;&quot;import_meta_env_placeholder&quot;&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">globalThis.import_meta_env </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&quot;import_meta_env&quot; + &quot;_placeholder&quot;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> placeholder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&quot;import_meta_env_placeholder&quot;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">globalThis.import_meta_env </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(placeholder);</span></span></code></pre></div></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>This expression should be placed before or at the top of your entry script, otherwise your code will end up with a <code>TypeError</code>:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Uncaught TypeError: Cannot read properties of undefined (reading &#39;NAME&#39;)</span></span>
<span class="line"><span>  at ...</span></span></code></pre></div></div>`,52)]))}const m=i(l,[["render",p]]);export{g as __pageData,m as default};
